var _={lang:{},http:{},focus:"",loading:!1,pageName:"",logo:"",menu:[],mounted:null,hideSideNav:!0,boxes:[],print:function(n){n=n||"printArea";var t=document.getElementById(n),e=window.open("","_blank");e.document.write(t.innerHTML),e.document.close(),e.print(),e.close()},findTag:function(n){var t=!1;return riot.vdom.forEach(function(e){e.opts.name!=n&&e.opts.id!=n||(t=e)}),console.log(t),t},alert:function(){},confirm:function(){},events:function(){},isEmpty:function(n){if(null==n)return!0;if(n.length>0)return!1;if(0===n.length)return!0;for(var t in n)if(hasOwnProperty.call(n,t))return!1;return!0},number:function(n){var n=parseFloat(n);return isNaN(n)&&(n=0),n}},print=function(n){console.log(n)},isset=function(n){return"undefined"!=typeof XMLHttpRequestUpload};Date.prototype.ymd=function(){var n=this.getFullYear().toString(),t=(this.getMonth()+1).toString(),e=this.getDate().toString();return n+"-"+(t[1]?t:"0"+t[0])+"-"+(e[1]?e:"0"+e[0])};
riot.mixin("nav",new function(){});
riot.tag2("updown",'<div><button type="button" onclick="{down}" style="width: 24px;"> - </button><button type="button" onclick="{up}"> + </button></div>',"","",function(t){var i=this;i.id=i.opts.dataid,this.up=function(){i.trigger("up",i.id)}.bind(this),this.down=function(){i.trigger("down",i.id)}.bind(this)});
_.http=function(e,o,t,n,i){var d="";_.loading+=1,1==_.loading&&riot.update(),"undefined"!=typeof Storage&&localStorage.token&&(d=localStorage.token),"SAVE"==e&&(e="undefined"!=typeof n.id&&n.id>0?"PUT":"POST"),i=i||apiRest;var a=new XMLHttpRequest;a.open(e,i+o+"?token="+d),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){if(200===a.status){if("function"==typeof t){var e=JSON.parse(a.responseText);"undefined"!=typeof e.res&&e.res?t(e.res,e.maxpage):t(e),"undefined"!=typeof e.msg&&""!=e.msg&&_.alert(e.msg),"undefined"!=typeof e.logged&&0!=e.logged||riot.route("login"),"undefined"==typeof e.focus&&""==e.focus||(_.focus=e.focus)}_.loading-=1,_.loading<=0&&(riot.update(),_.events())}},n="object"==typeof n?JSON.stringify(n):"",a.send(n)};
!function(){var t={routes:{login:"login",home:"home","default":"login"},session:function(){"undefined"!=typeof Storage&&localStorage.lastPage?_.lastPage=localStorage.lastPage:_.lastPage=t.routes["default"]},language:function(){_.http("GET","language",function(t){_.lang=t,riot.update()},"")},redirect:function(e,a,o){_.lastPage=e||t.routes["default"],"undefined"!=typeof Storage&&localStorage.token||(_.lastPage=t.routes["default"]),"undefined"!=typeof t.routes[_.lastPage]&&""!=t.routes[_.lastPage]&&"login"!=t.routes[_.lastPage]?(_.pageName=t.routes[_.lastPage],localStorage.setItem("lastPage",t.routes[_.lastPage]),_.mounted=riot.mount("#view",t.routes[_.lastPage],{param1:a,param2:o}),_.events()):(_.mounted=riot.mount("#view",t.routes["default"]),_.pageName=t.routes["default"]),print("_.pageName"),print(_.pageName),_.closeNav(),riot.update()},start:function(){if(this.language(),riot.mount("popup"),riot.mount("nav"),window.location.hash){var e=window.location.hash.substring(1);e=e.split("/");var a=e[0]||"",o=e[1]||"",r=e[2]||"";"login"==a&&(_.pageName=t.routes["default"]),riot.mount("#view",a,{param1:o,param2:r})}else riot.mount("#view",t.routes["default"]);riot.route.stop(),riot.route.start(),riot.route(function(e,a,o){a=a||"",o=o||"",t.redirect(e,a,o)})}};t.start()}();